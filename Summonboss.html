<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIR4 Boss Tracker</title>
    <style>
        * { box-sizing: border-box; }
        body {
            background: #0f0f0f; color: #ddd; font-family: 'Segoe UI', sans-serif;
            margin: 0; padding: 10px; width: 325px; height: 580px;
            border: 1px solid #ff9800; border-radius: 8px; overflow: hidden;
        }
        .header { position: sticky; top: 0; background: #0f0f0f; padding-bottom: 10px; border-bottom: 1px solid #333; z-index: 10; }
        h4 { margin: 0 0 8px 0; color: #ff9800; text-align: center; text-transform: uppercase; font-size: 13px; }
        .filter-container { display: flex; flex-wrap: wrap; gap: 4px; margin-top: 5px; }
        .f-btn { 
            flex: 1 1 calc(20% - 4px); border: none; padding: 8px 0; font-size: 8px; 
            font-weight: bold; cursor: pointer; border-radius: 3px; text-transform: uppercase; 
            opacity: 0.6; transition: 0.2s; text-align: center; color: #fff;
        }
        /* Correção Ponto 1: Botão Tudo Legível */
        .f-btn.active { opacity: 1; outline: 1px solid #fff; box-shadow: 0 0 5px #ff9800; color: #000 !important; background: #fff !important; }
        
        .btn-voltar { background: #444; color: #fff; flex: 1 1 100%; margin-bottom: 4px; font-size: 10px; border-radius: 3px; cursor: pointer; border: none; padding: 8px; }
        .scroll { height: 410px; overflow-y: auto; margin-top: 10px; padding-right: 5px; }
        
        .boss-card { background: rgba(255,255,255,0.05); border: 1px solid #222; border-radius: 5px; margin-bottom: 8px; border-left: 4px solid #444; cursor: pointer; }
        .boss-header { display: flex; align-items: center; padding: 8px; gap: 10px; }
        .boss-img { width: 42px; height: 42px; border: 1px solid #444; border-radius: 4px; object-fit: cover; background: #222; }
        .boss-name { font-size: 10px; font-weight: bold; color: #fff; display: block; }
        .npc-info { font-size: 8px; color: #ff9800; display: block; }
        
        .items-container { display: none; padding: 8px; background: rgba(0,0,0,0.5); border-top: 1px solid #222; flex-direction: row; gap: 8px; overflow-x: auto; }
        .boss-card.expanded .items-container { display: flex; }
        .item-box { text-align: center; min-width: 40px; }
        .item-img { width: 32px; height: 32px; border: 1px solid #333; border-radius: 3px; background: #1a1a1a; }
        .hidden { display: none !important; }
        
        .c-m2 { border-left-color: #ffcc80; } .c-m3 { border-left-color: #a5d6a7; }
        .c-m4 { border-left-color: #90ee90; } .c-m5 { border-left-color: #ffe082; }
        .c-m6 { border-left-color: #ce93d8; } .c-m7 { border-left-color: #add8e6; }
        .c-m8 { border-left-color: #f28d8d; } .c-mc { border-left-color: #607d8b; }
        .c-c1 { border-left-color: #ff5252; }
    </style>
</head>
<body>

<div class="header">
    <h4>MIR4 Boss Tracker</h4>
    <div id="menuPrincipal" class="filter-container">
        <button class="f-btn active" style="background:#fff;" onclick="filterBoss('all', this)">TUDO</button>
        <button class="f-btn" style="background:#607d8b;" onclick="trocarMenu('mc')">MC</button>
        <button class="f-btn" style="background:#ffcc80; color:#000;" onclick="filterBoss('C3-M2', this)">M2</button>
        <button class="f-btn" style="background:#a5d6a7; color:#000;" onclick="filterBoss('C3-M3', this)">M3</button>
        <button class="f-btn" style="background:#90ee90; color:#000;" onclick="filterBoss('C3-M4', this)">M4</button>
        <button class="f-btn" style="background:#ffe082; color:#000;" onclick="filterBoss('C3-M5', this)">M5</button>
        <button class="f-btn" style="background:#ce93d8; color:#000;" onclick="filterBoss('C3-M6', this)">M6</button>
        <button class="f-btn" style="background:#add8e6; color:#000;" onclick="filterBoss('C3-M7', this)">M7</button>
        <button class="f-btn" style="background:#f28d8d; color:#000;" onclick="filterBoss('C3-M8', this)">M8</button>
        <button class="f-btn" style="background:#ff5252;" onclick="trocarMenu('m155')">155+</button>
    </div>
    <div id="menuVoltar" class="filter-container hidden">
        <button class="btn-voltar" onclick="trocarMenu('principal')">← VOLTAR AO MENU PRINCIPAL</button>
    </div>
</div>

<div class="scroll" id="bossContainer"></div>

<script>
    const pathBoss = "img/bosses/";
    const pathCraft = "img/craft/";
    const version = new Date().getTime(); 

    const bossData = [
        // M8
        { id: "m8_pakua_rainha_viboras.webp", name: "Rainha das Víboras", mundo: "C3-M8", info: "Buman | Salão de Pedra", css: "c-m8", items: ["item_veneno_viboras.webp", "item_escama_viboras.webp", "item_pipa.webp"] },
        { id: "m8_pakua_arahan.webp", name: "Arahan", mundo: "C3-M8", info: "Buman | Salão de Pedra", css: "c-m8", items: ["item_malicia_arahan.webp", "item_rancor_arahan.webp", "item_tenacidade_arahan.webp", "item_pipa.webp"] },
        { id: "m8_mina_faccao_trovao.webp", name: "Facção do Trovão", mundo: "C3-M8", info: "Yong Munki | Mina 3F", css: "c-m8", items: ["item_trovao_celeste.webp", "item_pipa.webp"] },
        { id: "m8_mina_faccao_terrestre.webp", name: "Facção Terrestre", mundo: "C3-M8", info: "Yong Munki | Mina 3F", css: "c-m8", items: ["item_divindade_terrestre.webp", "item_pipa.webp"] },
        { id: "m8_mina_primeiro_anciao.webp", name: "Primeiro Ancião", mundo: "C3-M8", info: "Yong Munki | Mina 3F", css: "c-m8", items: ["item_energia_assombrada.webp", "item_flauta_bambu.webp", "item_selo_fogofernal.webp", "item_pipa.webp"] },

        // M7
        { id: "m7_lunula_lobo_fantasma.webp", name: "Lobo Fantasmagórico", mundo: "C3-M7", info: "Braço Direito | Lúnula 2F", css: "c-m7", items: ["item_lobo_lunula_1.webp", "item_pilula_de_gelo.webp", "item_pipa.webp"] },
        { id: "m7_lunula_demonio_de_sangue.webp", name: "Demônio de Sangue", mundo: "C3-M7", info: "Braço Direito | Lúnula 2F", css: "c-m7", items: ["item_berrante_lunula.webp", "item_pilula_de_gelo.webp", "item_pipa.webp"] },
        { id: "m7_prisao.webp", name: "Prisão Subterrânea", mundo: "C3-M7", info: "Buman | Navio", css: "c-m7", items: ["item_tartaruga_negra.webp", "item_tesouro_terra.webp", "item_tesouro_agua.webp", "item_pipa.webp"] },
        { id: "m4_paraiso_trovejante_nefariox.webp", name: "Trovejante Nefariox", mundo: "C3-M7", info: "Dangpo | Paraíso", css: "c-m7", items: ["item_pipa.webp"] },

        // M4
        { id: "m4_sabuk_tesouro_dourado.webp", name: "Tesouro Dourado", mundo: "C3-M4", info: "Dangpo | Prov. Sabuk", css: "c-m4", items: ["item_valor_saqueado.webp", "item_forca_vital.webp", "item_pipa.webp"] },
        { id: "m4_paraiso_sangue_contaminado.webp", name: "Sangue Contaminado", mundo: "C3-M4", info: "Karungka | Paraíso 2F", css: "c-m4", items: ["item_sangue_nefariox.webp", "item_pipa.webp"] },
        { id: "m4_monge.webp", name: "Monge de Sangue Negro", mundo: "C3-M4", info: "Buman | Navio", css: "c-m4", items: ["item_tomo_do_culto.webp", "item_pipa.webp"] },

        // M2
        { id: "m2_seocheon.webp", name: "Feitoria Seocheon", mundo: "C3-M2", info: "Condutor | Feitoria", css: "c-m2", items: ["item_feitoria_1.webp", "item_feitoria_2.webp", "item_pipa.webp"] },
        { id: "m2_montanha.webp", name: "Montanha de lunula", mundo: "C3-M2", info: "Condutor | Montanha", css: "c-m2", items: ["item_japamala_1.webp", "item_montanha_2.webp", "item_pipa.webp"] },
        { id: "m2_twinway.webp", name: "Caminho Twinway", mundo: "C3-M2", info: "Condutor | Twinway", css: "c-m2", items: ["item_flor_morta.webp", "item_pipa.webp"] },
        { id: "m2_touro.webp", name: "Rei dos Touros Malvados", mundo: "C3-M2", info: "Condutor | Touros", css: "c-m2", items: ["item_porco_martelo.webp", "item_pipa.webp"] },

        // M5
        { id: "m5_flauta_consoladora.webp", name: "Flauta Consoladora", mundo: "C3-M5", info: "Gufa | Campo de Gelo", css: "c-m5", items: ["item_bambu_magico.webp", "item_pipa.webp"] },
        { id: "m5_ruina.webp", name: "Ruina do Demônio", mundo: "C3-M5", info: "Gufa | Ruína", css: "c-m5", items: ["item_fragmento_caos.webp", "item_pipa.webp"] }, 
        { id: "m5_aranha.webp", name: "Demônio Aracnideo", mundo: "C3-M5", info: "Gufa | Aranha", css: "c-m5", items: ["item_pipa.webp"] },
        { id: "m5_templo.webp", name: "Templo Ilusório", mundo: "C3-M5", info: "Grande Muralha", css: "c-m5", items: ["item_po_ilusorio.webp", "item_pipa.webp"] },

        // M3
        { id: "m3_tatu.webp", name: "Necropole nefariox", mundo: "C3-M3", info: "Hyeokjun | Necrópole", css: "c-m3", items: ["item_coracao_tatu.webp", "item_casco_tatu.webp", "item_pipa.webp"] },
        { id: "m3_planicia_kaya.webp", name: "Planicie da viboras", mundo: "C3-M3", info: "Hyeokjun | Planície", css: "c-m3", items: ["item_escama_viboras.webp", "item_pipa.webp"] },
        { id: "m3_covil_tatu.webp", name:
