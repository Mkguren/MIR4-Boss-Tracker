<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=330, user-scalable=no">
    <title>MIR4 Tracker</title>
    <style>
        * { box-sizing: border-box; }
        html { overflow-y: scroll; background: #000; }
        *::-webkit-scrollbar {width: 4px;}
        *::-webkit-scrollbar-thumb {background: #ff9800; border-radius: 10px;}
        
        body {
            background: #0f0f0f; color: #ddd; font-family: 'Segoe UI', sans-serif;
            margin: 0 auto; padding: 10px; width: 330px; 
            border: 1px solid #ff9800; border-radius: 8px;
        }
        .header { position: sticky; top: 0; background: #0f0f0f; padding-bottom: 10px; border-bottom: 1px solid #333; z-index: 10; }
        h4 { margin: 0 0 8px 0; color: #ff9800; text-align: center; text-transform: uppercase; font-size: 13px; }
        
        .nav-menu { display: flex; gap: 5px; margin-bottom: 10px; }
        .nav-btn { flex: 1; text-decoration: none; text-align: center; font-size: 10px; font-weight: bold; padding: 8px 0; border-radius: 3px; }
        .btn-active { background: #ff9800; color: #000; }
        .btn-inactive { background: #252525; color: #fff; border: 1px solid #444; }

        .search-container { display: flex; gap: 5px; width: 100%; }
        input, select { padding: 7px; background: #252525; border: 1px solid #444; color: #fff; border-radius: 4px; font-size: 11px; outline: none; }
        input { flex: 2; } select { flex: 1.5; }
        
        .scroll { height: 480px; overflow-y: auto; margin-top: 10px; }
        .section-title { font-size: 10px; color: #ff9800; text-transform: uppercase; margin: 12px 0 5px 0; font-weight: bold; border-left: 2px solid #ff9800; padding-left: 5px; }
        .item { padding: 8px 5px; border-bottom: 1px solid #222; border-left: 4px solid #444; margin-bottom: 4px; background: rgba(255,255,255,0.02); }
        .name { color: #fff; font-weight: bold; font-size: 12px; display: block; }
        .lvl-orange { color: #ff9800; font-weight: bold; }
        .loc { color: #777; font-size: 10px; display: block; margin-top: 2px; }
        .camada { color: #ff9800; font-size: 9px; font-weight: bold; display: block; margin-bottom: 2px; text-transform: uppercase; }
        .time-box { background: rgba(0,230,118,0.1); padding: 5px; border-radius: 4px; margin-top: 5px; }
        .badge { display: inline-block; font-family: monospace; font-size: 11px; margin-right: 6px; color: #00e676; }
        .item-alert { border-left-color: #ff3d00!important; background: rgba(255,61,0,0.1); }
        .alert-active { color: #ff3d00!important; font-weight: bold; text-decoration: underline; animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: .5; } }
        .L141 { border-left-color: #4caf50; } .L143 { border-left-color: #2196f3; }
        .L150 { border-left-color: #9c27b0; } .L155 { border-left-color: #f44336; }
    </style>
</head>
<body onclick="itA()">
    <div class="header">
        <h4>MIR4 Boss Tracker</h4>
        <div class="nav-menu">
            <a href="index.html" class="nav-btn btn-active">BOSSES DE CAMPO</a>
            <a href="Summonboss.html" class="nav-btn btn-inactive">INVOCAÇÃO</a>
        </div>
        <div class="search-container">
            <input type="text" id="ib" placeholder="Buscar..." onkeyup="up()">
            <select id="sh" onchange="up()">
                <option value="">Horas</option>
                <option value="00:00">00:00</option><option value="01:00">01:00</option>
                <option value="02:00">02:00</option><option value="03:00">03:00</option>
                <option value="04:00">04:00</option><option value="05:00">05:00</option>
                <option value="06:00">06:00</option><option value="07:00">07:00</option>
                <option value="08:00">08:00</option><option value="09:00">09:00</option>
                <option value="10:00">10:00</option><option value="11:00">11:00</option>
                <option value="12:00">12:00</option><option value="13:00">13:00</option>
                <option value="14:00">14:00</option><option value="15:00">15:00</option>
                <option value="16:00">16:00</option><option value="17:00">17:00</option>
                <option value="18:00">18:00</option><option value="19:00">19:00</option>
                <option value="20:00">20:00</option><option value="21:00">21:00</option>
                <option value="22:00">22:00</option><option value="23:00">23:00</option>
            </select>
        </div>
    </div>
    <div class="scroll" id="lb"></div>

    <script>
        var ctx=null; function itA(){ if(!ctx) ctx=new(window.AudioContext||window.webkitAudioContext)(); }
        function bp(){ if(!ctx)return; var o=ctx.createOscillator(), g=ctx.createGain(); o.connect(g); g.connect(ctx.destination); o.frequency.value=800; g.gain.setValueAtTime(.1,ctx.currentTime); o.start(); o.stop(ctx.currentTime+.3); }

        var ds = [
            ["L141","Matha","141-","M1-Floresta",["00:00","02:00","04:00","06:00","08:00","10:00","12:00","14:00","16:00","18:00","20:00","22:00"],"C3"],
            ["L141","Touro Demoniaco","141-","M1-Templo",["01:00","03:00","05:00","07:00","09:00","11:00","13:00","15:00","17:00","19:00","21:00","23:00"],"C3"],
            ["L141","Rei dos Touros","141-","M1-Santuario",["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"],"C3"],
            ["L143","Juhui","143+","M2-Lunula",["02:30","05:30","08:30","11:30","14:30","17:30","20:30","23:30"],"C3"],
            ["L150","Tatu Sombrio","150+","M3-Planicie",["01:30","03:30","05:30","07:30","09:30","11:30","13:30","15:30","17:30","19:30","21:30","23:30"],"C3"],
            ["L155","Jihwa","155+","M1-Unseo",["02:30","05:30","08:30","11:30","14:30","17:30","20:30","23:30"],"C1"]
        ];

        var alertedTimes = new Set();

        function up(){
            var c=document.getElementById('lb'), q=document.getElementById('ib').value.toLowerCase(), f=document.getElementById('sh').value, now=new Date(), win=[], hA="", hN="", anyA=false;
            var HH=("0"+now.getHours()).slice(-2), MM=("0"+now.getMinutes()).slice(-2);
            
            for(var i=0;i<=10;i++){
                var d=new Date(now.getTime()+(i*60000));
                win.push(("0"+d.getHours()).slice(-2)+":"+("0"+d.getMinutes()).slice(-2));
            }

            ds.forEach(b => {
                if((b[1]+b[3]).toLowerCase().indexOf(q)==-1 || (f && b[4].indexOf(f)==-1)) return;
                var isA=false, tH="";
                b[4].forEach(t => {
                    var act = win.indexOf(t) > -1;
                    if(act) { isA=true; if(!alertedTimes.has(b[1]+t)){ anyA=true; alertedTimes.add(b[1]+t); }}
                    tH += '<span class="badge '+(act?'alert-active':'')+'">'+t+'</span> ';
                });
                var card = '<div class="item '+b[0]+' '+(isA?'item-alert':'')+'"><span class="camada">'+b[5]+'</span><span class="name">'+b[1]+' <span class="lvl-orange">'+b[2]+'</span></span><span class="loc">'+b[3]+'</span><div class="time-box">'+tH+'</div></div>';
                if(isA) hA+=card; else hN+=card;
            });
            c.innerHTML = (hA?'<div class="section-title">Próximos</div>'+hA:'') + '<div class="section-title">Todos</div>' + hN;
            if(anyA) bp();
            if(now.getMinutes() == 0) alertedTimes.clear();
        }

        setInterval(up, 30000);
        window.onload = up;
    </script>
</body>
</html>
